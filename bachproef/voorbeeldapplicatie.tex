%%=============================================================================
%% Voorbeeldapplicatie
%%=============================================================================

\chapter{\IfLanguageName{dutch}{Voorbeeldapplicatie}{Example of an application}}
\label{ch:voorbeeldapplicatie}
Amista heeft een Ubuntu server ter beschikking gesteld dat wordt gehost op Digital Ocean. De server wordt gebruikt om de build schedulers op te draaien en zo te vergelijken. Eerst moeten er enkele belangrijke zaken ingesteld worden alvorens aan de slag te gaan, zoals security en dergelijke.

    \paragraph{Digital Ocean}
    %TODO: uitleggen wat Digital Ocean is en doet.
    
    \paragraph{Ubuntu server}
    %TODO: Uitleggen welke kenmerken de Ubuntu server heeft.
    
    \paragraph{Installatie Ubuntu server}
    Eerst maken we de Ubuntu server klaar voor gebruik om zo de nodige zaken te installeren.
    %TODO: In figuur EersteKeerInloggenOpUbuntuServer in de bijlagen wordt er getoond wat er moet gebeuren als er voor de eerste keer ingelogd wordt op de server.
    Via de root account wordt er via SSH ingelogd op de server. 
    
    SSH staat voor secure shell en is een software protocol dat voor een veilige verbinding (tunnel) zorgt tussen de client en de server. Het wordt gebruikt voor het configureren van een server, het beheren van netwerken en operating systems. Alle gegevens dat tussen beiden worden uitgevoerd zijn geÃ«ncrypteerd waardoor het moeilijker wordt voor hackers om de data te bemachtigen.
    
    Een server die gebruik maakt van SSH wordt ook wel een sshd server genoemd. Eens ingelogd op de sshd server moeten er enkele zaken aangepast worden aan de ssh configuratie in de file /etc/ssh/sshd\_config. Omdat we hier via de root gebruiker werken moet de property PermitRootLogin op yes staan. Dit zorgt ervoor dat de root gebruiker kan inloggen.
    StrictMode moet ook op yes staan, zo kan er niemand inloggen als de authenticatie documenten leesbaar zijn voor iedereen. Dit voor het beveiligen van configuratie documenten. %TODO: Deze configuratie kan u zien in figuur Changing-sshd_config in de bijlagen.
    
    De default manier om in te loggen via ssh is via een account en een paswoord, maar het is ook mogelijk om het account en het paswoord te vervangen door een private en een public key. Dit principe noemt key-based authentication en wordt vooral tijdens development en in scripts gebruikt of voor single sign-on. SSH genereert een private en een public key op de client wanneer deze stap wordt geconfigureerd. De private key moet veilig bewaard worden op de client computer. De public key moet doorgegeven worden aan de remote server. Wanneer de client wil inloggen op de server voert hij een request uit. De server maakt via zijn public key een bericht en stuurt dit als response door naar de client. De client leest het bericht aan de hand van zijn private key en stuurt dan een aangepaste response terug naar de remote server. De server valideert deze response. Bij een geldige private key zal er een goede response verstuurd worden, bij een ongeldige private key een foute response.
    In deze thesis gaat men ervan uit dat de client computer een ssh key heeft die gebruikt kan worden. %TODO: Zoals u in figuur SSHPrivateKeyOnClient kan zien heeft de client die gebruikt werd tijdens het schrijven van deze thesis enkel lees- en schrijfrechten voor de file id\_rsa, dit om het als secret te bewaren.
    De id\_rsa.pub is de publieke key van de client die op de server moet komen om zo de ssh validatie te voorzien, dit wordt ook wel een ssh session genoemd. Eens de ssh session geconfigureerd is zal het niet nodig zijn om via een paswoord in te loggen op de remote server via deze client.
    %TODO: In figuur CopyPublicKeyToServer in de bijlagen is te zien hoe de ssh session wordt opgezet tussen de client en de remote server voor de root user.
    Voor deze thesis en om veiligheidsredenen is het beter om enkel via key-based authenticatie in te loggen en het paswoord uit te sluiten.
    %TODO: In figuur sshd_configNoPassword is te zien welke aanpassingen in de sshd\_config file van de sshd server moeten gebeuren om het niet meer mogelijk te maken om in te loggen via een paswoord. PasswordAuthentication en ChallengeResponseAuthentication moeten naar no verandert worden. PubKeyAuthentication moet naar yes verandert worden.
    Nu moet de sshd\_config file opgeslagen worden (\^x + y + enter) en de ssh daemon herstart worden door het commando sudo systemctl restart ssh in te geven.
    
    Om de remote server nog meer te beschermen tegen cyber aanvallen is het nodig om een firewall op te zetten. In deze voorbeeldapplicatie maken we gebruik van de UFW Firewall. Dis staat voor Uncomplicated Firewall en is een gebruiksvriendelijke tool dat helpt om de iptables onder controle te houden om zo te zorgen dat bepaalde services toegelaten worden tot onze server.
    In Linux maken ze gebruik van het protocol SSH via de service OpenSSH, deze heeft ook een profiel bij UFW.
    %TODO: In Figuur UFWFirewallSetup in de bijlagen is te zien hoe de firewall de SSH service toelaat. Het is enkel mogelijk om de server te bereiken via deze service. Later worden er uiteraard meerdere services toegelaten.
    
    
    
    
    
    